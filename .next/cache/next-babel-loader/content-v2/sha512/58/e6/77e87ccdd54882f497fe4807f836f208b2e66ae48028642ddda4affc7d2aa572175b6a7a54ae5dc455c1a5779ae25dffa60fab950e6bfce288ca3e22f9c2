{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"C:/Reactstorefront/base_reactstorefront/AK-React-Base/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Reactstorefront/base_reactstorefront/AK-React-Base/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useContext } from 'react';\nimport Container from \"@material-ui/core/Container\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport SessionContext from 'react-storefront/session/SessionContext';\nimport get from 'lodash/get';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      border: \"1px solid \".concat(theme.palette.divider),\n      minHeight: 100,\n      padding: 10,\n      position: 'relative'\n    },\n    spacingBlock: {\n      margin: 10\n    },\n    loader: {\n      position: 'absolute',\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      background: 'rgba(0,0,0,0.5)',\n      zIndex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n      display: 'flex'\n    }\n  };\n});\nvar Loader = /*#__PURE__*/React.memo(function (_ref) {\n  var active = _ref.active;\n  var classes = useStyles();\n\n  if (!active) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: classes.loader,\n    children: /*#__PURE__*/_jsx(CircularProgress, {})\n  });\n});\nexport default function LoginForm() {\n  var classes = useStyles();\n\n  var _useContext = useContext(SessionContext),\n      actions = _useContext.actions,\n      session = _useContext.session;\n\n  var signedIn = session.signedIn;\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(''),\n      signInEmail = _useState2[0],\n      setSignInEmail = _useState2[1];\n\n  var _useState3 = useState(''),\n      signInPassword = _useState3[0],\n      setSignInPassword = _useState3[1];\n\n  var _useState4 = useState(''),\n      signInError = _useState4[0],\n      setSignInError = _useState4[1];\n\n  var _useState5 = useState(''),\n      signUpEmail = _useState5[0],\n      setSignUpEmail = _useState5[1];\n\n  var _useState6 = useState(''),\n      signUpPassword = _useState6[0],\n      setSignUpPassword = _useState6[1];\n\n  var _useState7 = useState(''),\n      signUpFirstName = _useState7[0],\n      setSignUpFirstName = _useState7[1];\n\n  var _useState8 = useState(''),\n      signUpLastName = _useState8[0],\n      setSignUpLastName = _useState8[1];\n\n  var _useState9 = useState(''),\n      signUpError = _useState9[0],\n      setSignUpError = _useState9[1];\n\n  var signIn = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var email, password;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              setSignInError('');\n              email = signInEmail;\n              password = signInPassword;\n              _context.prev = 4;\n              _context.next = 7;\n              return actions.signIn({\n                email: email,\n                password: password\n              });\n\n            case 7:\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](4);\n              setSignInError(get(_context.t0, 'message', 'Sign in error, please check your credentials'));\n\n            case 12:\n              _context.prev = 12;\n              setLoading(false);\n              return _context.finish(12);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 9, 12, 15]]);\n    }));\n\n    return function signIn() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var signOut = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setLoading(true);\n              _context2.next = 3;\n              return actions.signOut();\n\n            case 3:\n              setLoading(false);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function signOut() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var signUp = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var firstName, lastName, email, password;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setLoading(true);\n              setSignUpError('');\n              firstName = signUpFirstName;\n              lastName = signUpLastName;\n              email = signUpEmail;\n              password = signUpPassword;\n              _context3.prev = 6;\n              _context3.next = 9;\n              return actions.signUp({\n                firstName: firstName,\n                lastName: lastName,\n                email: email,\n                password: password\n              });\n\n            case 9:\n              _context3.next = 14;\n              break;\n\n            case 11:\n              _context3.prev = 11;\n              _context3.t0 = _context3[\"catch\"](6);\n              setSignUpError(get(_context3.t0, 'message', 'An error occurred during sign up'));\n\n            case 14:\n              _context3.prev = 14;\n              setLoading(false);\n              return _context3.finish(14);\n\n            case 17:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[6, 11, 14, 17]]);\n    }));\n\n    return function signUp() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(Container, {\n      className: classes.root,\n      children: [/*#__PURE__*/_jsx(Loader, {\n        active: loading\n      }), !signedIn ? /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(\"h3\", {\n            children: \"SIGN IN\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(TextField, {\n            type: \"email\",\n            value: signInEmail,\n            label: \"Email\",\n            onChange: function onChange(event) {\n              return setSignInEmail(event.target.value);\n            }\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(TextField, {\n            type: \"password\",\n            value: signInPassword,\n            label: \"Password\",\n            onChange: function onChange(event) {\n              return setSignInPassword(event.target.value);\n            }\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(Button, {\n            variant: \"outlined\",\n            onClick: signIn,\n            children: \"Sign In\"\n          })\n        }), signInError && /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(\"b\", {\n            style: {\n              color: '#f00'\n            },\n            children: signInError\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: classes.spacingBlock,\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            children: \"or\"\n          }), /*#__PURE__*/_jsx(\"h3\", {\n            children: \"SIGN UP\"\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(TextField, {\n            value: signUpFirstName,\n            label: \"First Name\",\n            onChange: function onChange(event) {\n              return setSignUpFirstName(event.target.value);\n            }\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(TextField, {\n            value: signUpLastName,\n            label: \"Last Name\",\n            onChange: function onChange(event) {\n              return setSignUpLastName(event.target.value);\n            }\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(TextField, {\n            type: \"email\",\n            value: signUpEmail,\n            label: \"Email\",\n            onChange: function onChange(event) {\n              return setSignUpEmail(event.target.value);\n            }\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(TextField, {\n            type: \"password\",\n            value: signUpPassword,\n            label: \"Password\",\n            onChange: function onChange(event) {\n              return setSignUpPassword(event.target.value);\n            }\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(Button, {\n            variant: \"outlined\",\n            onClick: signUp,\n            children: \"Sign Up\"\n          })\n        }), signUpError && /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(\"b\", {\n            style: {\n              color: '#f00'\n            },\n            children: signUpError\n          })\n        })]\n      }) : /*#__PURE__*/_jsx(_Fragment, {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(Button, {\n            variant: \"outlined\",\n            onClick: signOut,\n            children: \"Sign Out\"\n          })\n        })\n      })]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}
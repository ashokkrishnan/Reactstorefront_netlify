{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useContext } from 'react';\nimport Container from \"@material-ui/core/Container\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport SessionContext from 'react-storefront/session/SessionContext';\nimport get from 'lodash/get';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    border: `1px solid ${theme.palette.divider}`,\n    minHeight: 100,\n    padding: 10,\n    position: 'relative'\n  },\n  spacingBlock: {\n    margin: 10\n  },\n  loader: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    background: 'rgba(0,0,0,0.5)',\n    zIndex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    display: 'flex'\n  }\n}));\nconst Loader = /*#__PURE__*/React.memo(({\n  active\n}) => {\n  const classes = useStyles();\n\n  if (!active) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: classes.loader,\n    children: /*#__PURE__*/_jsx(CircularProgress, {})\n  });\n});\nexport default function LoginForm() {\n  const classes = useStyles();\n  const {\n    actions,\n    session\n  } = useContext(SessionContext);\n  const {\n    signedIn\n  } = session;\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: signInEmail,\n    1: setSignInEmail\n  } = useState('');\n  const {\n    0: signInPassword,\n    1: setSignInPassword\n  } = useState('');\n  const {\n    0: signInError,\n    1: setSignInError\n  } = useState('');\n  const {\n    0: signUpEmail,\n    1: setSignUpEmail\n  } = useState('');\n  const {\n    0: signUpPassword,\n    1: setSignUpPassword\n  } = useState('');\n  const {\n    0: signUpFirstName,\n    1: setSignUpFirstName\n  } = useState('');\n  const {\n    0: signUpLastName,\n    1: setSignUpLastName\n  } = useState('');\n  const {\n    0: signUpError,\n    1: setSignUpError\n  } = useState('');\n\n  const signIn = async () => {\n    setLoading(true);\n    setSignInError('');\n    const email = signInEmail;\n    const password = signInPassword;\n\n    try {\n      await actions.signIn({\n        email,\n        password\n      });\n    } catch (error) {\n      setSignInError(get(error, 'message', 'Sign in error, please check your credentials'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const signOut = async () => {\n    setLoading(true);\n    await actions.signOut();\n    setLoading(false);\n  };\n\n  const signUp = async () => {\n    setLoading(true);\n    setSignUpError('');\n    const firstName = signUpFirstName;\n    const lastName = signUpLastName;\n    const email = signUpEmail;\n    const password = signUpPassword;\n\n    try {\n      await actions.signUp({\n        firstName,\n        lastName,\n        email,\n        password\n      });\n    } catch (error) {\n      setSignUpError(get(error, 'message', 'An error occurred during sign up'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(Container, {\n      className: classes.root,\n      children: [/*#__PURE__*/_jsx(Loader, {\n        active: loading\n      }), !signedIn ? /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(\"h3\", {\n            children: \"SIGN IN\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(TextField, {\n            type: \"email\",\n            value: signInEmail,\n            label: \"Email\",\n            onChange: event => setSignInEmail(event.target.value)\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(TextField, {\n            type: \"password\",\n            value: signInPassword,\n            label: \"Password\",\n            onChange: event => setSignInPassword(event.target.value)\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(Button, {\n            variant: \"outlined\",\n            onClick: signIn,\n            children: \"Sign In\"\n          })\n        }), signInError && /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(\"b\", {\n            style: {\n              color: '#f00'\n            },\n            children: signInError\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: classes.spacingBlock,\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            children: \"or\"\n          }), /*#__PURE__*/_jsx(\"h3\", {\n            children: \"SIGN UP\"\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(TextField, {\n            value: signUpFirstName,\n            label: \"First Name\",\n            onChange: event => setSignUpFirstName(event.target.value)\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(TextField, {\n            value: signUpLastName,\n            label: \"Last Name\",\n            onChange: event => setSignUpLastName(event.target.value)\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(TextField, {\n            type: \"email\",\n            value: signUpEmail,\n            label: \"Email\",\n            onChange: event => setSignUpEmail(event.target.value)\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(TextField, {\n            type: \"password\",\n            value: signUpPassword,\n            label: \"Password\",\n            onChange: event => setSignUpPassword(event.target.value)\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(Button, {\n            variant: \"outlined\",\n            onClick: signUp,\n            children: \"Sign Up\"\n          })\n        }), signUpError && /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(\"b\", {\n            style: {\n              color: '#f00'\n            },\n            children: signUpError\n          })\n        })]\n      }) : /*#__PURE__*/_jsx(_Fragment, {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.spacingBlock,\n          children: /*#__PURE__*/_jsx(Button, {\n            variant: \"outlined\",\n            onClick: signOut,\n            children: \"Sign Out\"\n          })\n        })\n      })]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}
{"version":3,"sources":["../src/AmpDrawer.js"],"names":["animationByAnchor","top","bottom","styles","theme","paper","closeButton","backdrop","left","right","backgroundColor","position","display","zIndex","amp","modal","fullscreen","height","width","hidden","lightbox","container","boxSizing","flexWrap","flexDirection","boxShadow","anchorLeft","anchorRight","sidebar","useStyles","name","AmpDrawer","props","classes","children","anchor","showCloseButton","DataBindingContext","ampState","propTypes","defaultProps"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react'\nimport Paper from '@material-ui/core/Paper'\nimport Head from 'next/head'\nimport { makeStyles } from '@material-ui/core/styles'\nimport clsx from 'clsx'\nimport DrawerCloseButton from 'react-storefront/drawer/DrawerCloseButton'\nimport DataBindingContext from './bind/DataBindingContext'\nimport Drawer from 'react-storefront/drawer/Drawer'\nimport { useAmp } from 'next/amp'\n\nconst animationByAnchor = {\n  top: 'fly-in-top',\n  bottom: 'fly-in-bottom',\n}\n\nexport const styles = theme => ({\n  paper: {},\n  closeButton: {},\n\n  backdrop: {\n    top: '0',\n    left: '0',\n    right: '0',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    bottom: '0',\n    position: 'fixed',\n    display: 'block',\n    zIndex: theme.zIndex.amp.modal + 1,\n  },\n\n  fullscreen: {\n    height: '100vh',\n    width: '100vw',\n  },\n\n  hidden: {\n    display: 'none',\n  },\n\n  lightbox: {\n    zIndex: theme.zIndex.amp.modal + 2,\n  },\n\n  container: {\n    width: '100%',\n    height: '100%',\n    boxSizing: 'border-box',\n    flexWrap: 'nowrap',\n    display: 'flex',\n    flexDirection: 'column',\n    position: 'relative',\n    boxShadow:\n      '0px 8px 10px -5px rgba(0,0,0,0.2), 0px 16px 24px 2px rgba(0,0,0,0.14), 0px 6px 30px 5px rgba(0,0,0,0.12)',\n  },\n\n  anchorLeft: {\n    left: 0,\n  },\n\n  anchorRight: {\n    right: 0,\n  },\n\n  sidebar: {\n    backgroundColor: 'white',\n    boxShadow:\n      '0px 8px 10px -5px rgba(0,0,0,0.2), 0px 16px 24px 2px rgba(0,0,0,0.14), 0px 6px 30px 5px rgba(0,0,0,0.12)',\n    '& ~ div[class*=\"amphtml-sidebar-mask\"]': {\n      display: 'none',\n    },\n  },\n})\n\nconst useStyles = makeStyles(styles, { name: 'RSFAmpDrawer' })\n\nexport default function AmpDrawer(props) {\n  if (!useAmp()) return <Drawer {...props} />\n\n  let { classes, children, anchor, showCloseButton = anchor === 'bottom', fullscreen } = props\n\n  classes = useStyles({ classes })\n  const { ampState } = useContext(DataBindingContext)\n\n  if (anchor === 'left' || anchor === 'right') {\n    return (\n      <>\n        <Head>\n          <script\n            async\n            custom-element=\"amp-sidebar\"\n            src=\"https://cdn.ampproject.org/v0/amp-sidebar-0.1.js\"\n          />\n        </Head>\n        <div\n          className={classes.hidden}\n          role=\"button\"\n          tabIndex={0}\n          on={`tap:${ampState}.close`}\n          amp-bind={`class->${ampState}.open ? \"${clsx(classes.backdrop)}\" : \"${classes.hidden}\"`}\n        >\n          <amp-sidebar\n            class={clsx({\n              [classes.sidebar]: true,\n              [classes.anchorLeft]: anchor === 'left',\n              [classes.anchorRight]: anchor === 'right',\n            })}\n            id={ampState}\n            layout=\"nodisplay\"\n            side={anchor}\n            on={`sidebarClose:AMP.setState({ ${ampState}: { open: false } })`}\n          >\n            {children}\n          </amp-sidebar>\n        </div>\n      </>\n    )\n  } else {\n    return (\n      <>\n        <Head>\n          <script\n            async\n            custom-element=\"amp-lightbox\"\n            src=\"https://cdn.ampproject.org/v0/amp-lightbox-0.1.js\"\n          />\n        </Head>\n        <div\n          className={classes.hidden}\n          on={`tap:AMP.setState({ ${ampState}: { open: false }})`}\n          amp-bind={`class->${ampState}.open ? \"${clsx(classes.backdrop)}\" : \"${classes.hidden}\"`}\n        >\n          <amp-lightbox\n            class={clsx({\n              [classes.lightbox]: true,\n              [classes.fullscreen]: fullscreen,\n            })}\n            animate-in={animationByAnchor[anchor]}\n            layout=\"nodisplay\"\n            amp-bind={`open->${ampState}.open`}\n          >\n            <Paper\n              className={classes.container}\n              square\n              tabIndex={0}\n              role=\"button\"\n              on={`tap:AMP.setState({ ${ampState}: { open: true }})`}\n            >\n              {showCloseButton && (\n                <DrawerCloseButton\n                  className={classes.closeButton}\n                  ampState={ampState}\n                  fullscreen={fullscreen}\n                />\n              )}\n              {children}\n            </Paper>\n          </amp-lightbox>\n        </div>\n      </>\n    )\n  }\n}\n\nAmpDrawer.propTypes = {}\n\nAmpDrawer.defaultProps = {\n  anchor: 'bottom',\n}\n"],"file":"AmpDrawer.js"}
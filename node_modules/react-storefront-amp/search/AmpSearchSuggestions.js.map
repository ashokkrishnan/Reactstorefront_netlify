{"version":3,"sources":["../../src/search/AmpSearchSuggestions.js"],"names":["styles","theme","root","thumbnailGroup","group","container","position","height","overflowY","useStyles","name","AmpSearchSuggestions","props","classes","DataBindingContext","ampState","width","as","href","text","thumbnail","src","alt","propTypes","SearchSuggestions","defaultProps"],"mappings":";;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEO,IAAMA,MAAM,GAAG,SAATA,MAAS,CAAAC,KAAK;AAAA,SAAK;AAC9BC,IAAAA,IAAI,EAAE,EADwB;AAE9BC,IAAAA,cAAc,EAAE,EAFc;AAG9BC,IAAAA,KAAK,EAAE,EAHuB;AAI9BC,IAAAA,SAAS,EAAE;AACTC,MAAAA,QAAQ,EAAE,UADD;AAETC,MAAAA,MAAM,EAAE,MAFC;AAGTC,MAAAA,SAAS,EAAE;AAHF;AAJmB,GAAL;AAAA,CAApB;;;AAWP,IAAMC,SAAS,GAAG,4BAAWT,MAAX,EAAmB;AAAEU,EAAAA,IAAI,EAAE;AAAR,CAAnB,CAAlB;;AAEe,SAASC,oBAAT,CAA8BC,KAA9B,EAAqC;AAClD,MAAMC,OAAO,GAAGJ,SAAS,CAACG,KAAD,CAAzB;;AADkD,oBAE7B,uBAAWE,8BAAX,CAF6B;AAAA,MAE1CC,QAF0C,eAE1CA,QAF0C;;AAIlD,MAAI,CAAC,kBAAL,EAAe,OAAO,gCAAC,6BAAD,EAAuBH,KAAvB,CAAP;AAEf,SACE,kEACE,gCAAC,gBAAD,QACE;AACE,IAAA,KAAK,MADP;AAEE,sBAAe,UAFjB;AAGE,IAAA,GAAG,EAAC;AAHN,IADF,EAME;AACE,IAAA,KAAK,MADP;AAEE,uBAAgB,cAFlB;AAGE,IAAA,GAAG,EAAC;AAHN,IANF,CADF,EAaE;AAAK,IAAA,SAAS,EAAEC,OAAO,CAACR;AAAxB,KACE;AACE,IAAA,MAAM,EAAC,MADT;AAEE,aAAOQ,OAAO,CAACX,IAFjB;AAGE,0DAA2Ca,QAA3C,wCAAiFA,QAAjF,iBAHF;AAIE,IAAA,KAAK,EAAC,QAJR;AAKE;AALF,KAOE;AAAU,IAAA,IAAI,EAAC;AAAf,KACE,gCAAC,iCAAD;AACE,IAAA,OAAO,EAAC,aADV;AAEE,IAAA,EAAE,EAAC,QAFL;AAGE,oDAAsCF,OAAO,CAACV,cAA9C,oBAAoEU,OAAO,CAACT,KAA5E;AAHF,KAKG,YALH,EAME,gCAAC,gCAAD;AACE,IAAA,cAAc,EAAE;AACdG,MAAAA,MAAM,EAAE,GADM;AAEdS,MAAAA,KAAK,EAAE;AAFO,KADlB;AAKE,IAAA,EAAE,EAAC,QALL;AAME,IAAA,IAAI,EAAE;AACJC,MAAAA,EAAE,EAAE,QADA;AAEJC,MAAAA,IAAI,EAAE,UAFF;AAGJC,MAAAA,IAAI,EAAE,UAHF;AAIJC,MAAAA,SAAS,EAAE;AAAEC,QAAAA,GAAG,EAAE,mBAAP;AAA4BC,QAAAA,GAAG,EAAE;AAAjC;AAJP;AANR,IANF,EAmBG,YAnBH,CADF,CAPF,CADF,CAbF,CADF;AAiDD;;AAEDX,oBAAoB,CAACY,SAArB,GAAiCC,8BAAkBD,SAAnD;AAEAZ,oBAAoB,CAACc,YAArB,GAAoCD,8BAAkBC,YAAtD","sourcesContent":["import React, { useContext } from 'react'\nimport makeStyles from '@material-ui/core/styles/makeStyles'\nimport SearchSuggestions from 'react-storefront/search/SearchSuggestions'\nimport SearchSuggestionItem from 'react-storefront/search/SearchSuggestionItem'\nimport SearchSuggestionGroup from 'react-storefront/search/SearchSuggestionGroup'\nimport Head from 'next/head'\nimport DataBindingContext from '../bind/DataBindingContext'\nimport { useAmp } from 'next/amp'\n\nexport const styles = theme => ({\n  root: {},\n  thumbnailGroup: {},\n  group: {},\n  container: {\n    position: 'relative',\n    height: '100%',\n    overflowY: 'auto',\n  },\n})\n\nconst useStyles = makeStyles(styles, { name: 'RSFAmpSearchSuggestions' })\n\nexport default function AmpSearchSuggestions(props) {\n  const classes = useStyles(props)\n  const { ampState } = useContext(DataBindingContext)\n\n  if (!useAmp()) return <SearchSuggestions {...props} />\n\n  return (\n    <>\n      <Head>\n        <script\n          async\n          custom-element=\"amp-list\"\n          src=\"https://cdn.ampproject.org/v0/amp-list-0.1.js\"\n        />\n        <script\n          async\n          custom-template=\"amp-mustache\"\n          src=\"https://cdn.ampproject.org/v0/amp-mustache-0.2.js\"\n        />\n      </Head>\n      <div className={classes.container}>\n        <amp-list\n          layout=\"fill\"\n          class={classes.root}\n          amp-bind={`src->\"/api/suggestions?q=\" + (${ampState}.text ? encodeURIComponent(${ampState}.text) : '')`}\n          items=\"groups\"\n          reset-on-refresh\n        >\n          <template type=\"amp-mustache\">\n            <SearchSuggestionGroup\n              caption=\"{{caption}}\"\n              ui=\"{{ui}}\"\n              amp-bind={`class->{{thumbnails}} ? \"${classes.thumbnailGroup}\" : \"${classes.group}\"`}\n            >\n              {'{{#links}}'}\n              <SearchSuggestionItem\n                thumbnailProps={{\n                  height: 100,\n                  width: 100,\n                }}\n                ui=\"{{ui}}\"\n                item={{\n                  as: '{{as}}',\n                  href: '{{href}}',\n                  text: '{{text}}',\n                  thumbnail: { src: '{{thumbnail.src}}', alt: '{{thumbnail.alt}}' },\n                }}\n              />\n              {'{{/links}}'}\n            </SearchSuggestionGroup>\n          </template>\n        </amp-list>\n      </div>\n    </>\n  )\n}\n\nAmpSearchSuggestions.propTypes = SearchSuggestions.propTypes\n\nAmpSearchSuggestions.defaultProps = SearchSuggestions.defaultProps\n"],"file":"AmpSearchSuggestions.js"}
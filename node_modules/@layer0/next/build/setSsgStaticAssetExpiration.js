"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Configure SSG pages to expire based on the revalidate time returned by getStaticProps, which
 * is stored in .next/prerender-manifest.json
 */
function setSsgStaticAssetExpiration(builder, prerenderManifest, distDir) {
    for (let [path, entry] of Object.entries(prerenderManifest.routes)) {
        const { initialRevalidateSeconds } = entry;
        if (path.endsWith('/')) {
            path = path + 'index';
        }
        if (initialRevalidateSeconds) {
            builder
                .setStaticAssetExpiration(`${distDir}/serverless/pages${path}.html`, initialRevalidateSeconds, initialRevalidateSeconds // temporary fix to pass build
            )
                .setStaticAssetExpiration(`${distDir}/serverless/pages${path}.json`, initialRevalidateSeconds, initialRevalidateSeconds // temporary fix to pass build
            );
        }
    }
}
exports.default = setSsgStaticAssetExpiration;
